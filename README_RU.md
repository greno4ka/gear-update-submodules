# gear-update-submodules

## Описание

Этот скрипт рекурсивно обходит все **git-субмодули**, находит зафиксированные коммиты
и создаёт **git-теги** на каждый из них, включая вложенные субмодули. Далее он выполняет
`git merge` этих тегов и генерирует вспомогательные строки для gear-rules и спек-файла

## Зависимости

- **bash**
- **git** (включая поддержку субмодулей)
- Стандартные утилиты: `sed`, `awk`, `basename`, `xargs`, `pushd`, `popd`

## Использование

```bash
gear-update-submodules <version>
```

**Важно!**

Параметр `<version>` — это именно версия, а не тэг.

## Что делает скрипт

1. Переходит в корень репозитория
2. Инициализирует все субмодули (включая вложенные)
3. Обходит каждый субмодуль рекурсивно
4. Получает:
   - Путь
   - URL
   - Коммит-хеш
5. Ставит тег `<relpath>-<version>` на каждый субмодуль
6. Выполняет `git merge` всех этих тегов (с опцией `--allow-unrelated-histories`, стратегия `ours`)
7. Выводит:
   - Список тегов
   - Список `tar:`-правил для `.gear/rules`
   - Список `SourceN:` строк

## Лицензия

MIT
